<view class="container">
   <!-- 自定义导航栏 -->
  <view class="custom-nav" style="height: {{navBarHeight}}px;">
    <view class="nav-title" style="top: {{statusBarHeight + (menuButtonInfo.top - statusBarHeight)/2}}px; height: {{menuButtonInfo.height}}px; line-height: {{menuButtonInfo.height}}px;">
      {{t.navTitle}}
    </view>
  </view> 
  
  <!-- 顶部卡片 -->
  <image class="top-card" src="{{topCardSvg}}" mode="widthFix" />

  <!-- 任务卡片列表 -->
  <view class="task-cards">
    <!-- 邀请好友任务 - 只有当showInviteTask为true时显示 -->
    <view class="task-card" bindtap="onInviteFriends" wx:if="{{showInviteTask}}">
      <image src="{{friendsCardSvg}}" mode="widthFix" />
      <view class="task-icon">
        <image src="/assets/figma/friends.png" mode="aspectFit" />
      </view>
      <button class="task-button {{inviteCodeFields.invitedUsers.length > inviteCodeFields.claimCount ? 'green' : 'yellow'}} {{language === 'en' ? 'en' : ''}}">
        <block wx:if="{{inviteCodeFields.invitedUsers.length > inviteCodeFields.claimCount}}">{{claimReward}}</block>
        <block wx:else>{{invitedText}}{{inviteCodeFields.invitedUsers.length}}/5{{language === 'zh' ? '人' : ''}}</block>
      </button>
    </view>

    <!-- 新用户签到任务 -->
    <view class="task-card" bindtap="onSignInTask">
      <image src="{{signInCardSvg}}" mode="widthFix" />
      <view class="task-icon">
        <image src="/assets/figma/sign-in.png" mode="aspectFit" />
      </view>
      <button class="task-button yellow {{language === 'en' ? 'en' : ''}}">
        {{goComplete}}
      </button>
    </view>

    <!-- 大转盘抽奖任务 -->
    <view class="task-card" bindtap="onDrawTask">
      <image src="{{drawCardSvg}}" mode="widthFix" />
      <view class="task-icon">
        <image src="/assets/figma/draw.png" mode="aspectFit" />
      </view>
      <button class="task-button yellow {{language === 'en' ? 'en' : ''}}">
        {{goComplete}}
      </button>
    </view>

    <!-- 打卡好礼任务 -->
    <view class="task-card" bindtap="onGiftTask">
      <image src="{{giftCardSvg}}" mode="widthFix" />
      <view class="task-icon">
        <image src="/assets/figma/gift.png" mode="aspectFit" />
      </view>
      <button class="task-button yellow {{language === 'en' ? 'en' : ''}}">
        {{goComplete}}
      </button>
    </view>
  </view>

  <!-- 邀请好友弹窗 -->
  <view class="invite-modal-mask" wx:if="{{showInviteModal}}" bindtap="closeInviteModal">
    <view class="invite-modal" catchtap="preventBubble">
      <!-- 关闭按钮 -->
      <view class="invite-close" bindtap="closeInviteModal">
        <image src="/assets/images/component/close_icon.svg" mode="aspectFit"></image>
      </view>
      
      <!-- 机器人插画 -->
      <image class="invite-robot" src="/assets/images/campus/invite_robot.svg" mode="widthFix"></image>
      
      <!-- 标题和内容 -->
      <view class="invite-title">{{inviteTitle}}</view>
      <view class="invite-content">{{inviteContent}}</view>
      
      <!-- 邀请码 -->
      <view class="invite-code-container">
        <view class="invite-code-box" wx:for="{{6}}" wx:key="index">
          <text>{{inviteCode[index] || ''}}</text>
        </view>
      </view>
      
      <!-- 复制邀请码并分享按钮 -->
      <button class="invite-share-btn {{language === 'en' ? 'en' : ''}}" bindtap="copyInviteCode" open-type="share">
        {{copyButton}}
      </button>
    </view>
  </view>
</view> 