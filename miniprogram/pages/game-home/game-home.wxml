<view class="container">
  <!-- 顶部导航 -->
  
  <t-navbar 
    title="{{t.navTitle || '首页'}}" 
    title-color="#ffffff"
    t-class="t-navbar"
    fixed
    placeholder
  />
  
  <!-- 顶部用户信息 -->
  <view class="card user-info-card mb-medium" bindtap="editProfile">
    <view class="flex-start">
      <view class="avatar-wrapper mr-medium">
        <image wx:if="{{avatarUrl}}" class="avatar-img" src="{{avatarUrl}}" mode="aspectFill"></image>
        <view wx:else class="avatar">
          <text class="iconfont icon-a-MATE_huaban1fuben118" style="color:#ffffff;font-size:64rpx;"></text>
        </view>
      </view>
      <view class="flex-1">
        <view class="flex-start mb-small">
          <text class="username mr-small">{{username}}</text>
          <view class="level-badge level-{{levelClass}}">{{level}}</view>
        </view>
        <view class="flex-start text-gray text-sm">
          <text class="mr-small">{{points}}{{t.points}}</text>
          <text class="dot mx-small">•</text>
          <text>{{progressText}}</text>
        </view>
        <view class="progress-bar mt-small">
          <view class="progress-bar-fill" style="width: {{levelProgress + '%'}}"></view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 游戏模式选择 -->
  <view class="section-title mb-medium">{{t.challengeModes}}</view>
  
  <view class="game-modes mb-large">
    <!-- 快速挑战 -->
    <view class="game-card" bindtap="startQuickChallenge">
      <view class="game-icon-container mr-medium" style="background-color: {{gameModes[0].bgColor}};">
        <text class="iconfont icon-{{gameModes[0].icon}}" style="color: {{gameModes[0].color}}; font-size: 48rpx;"></text>
      </view>
      <view class="flex-1">
        <view class="game-mode-title">{{t.quickChallengeTitle}}</view>
        <view class="game-mode-desc">{{t.quickChallengeDesc}}</view>
      </view>
      <t-icon name="chevron-right" size="40rpx" color="#9CA3AF" />
    </view>
    
    <!-- 高难模式 -->
    <view class="game-card">
      <view class="game-icon-container purple mr-medium" style="background-color: {{gameModes[1].bgColor}};">
        <text class="iconfont icon-{{gameModes[1].icon}}" style="color: {{gameModes[1].color}}; font-size: 48rpx;"></text>
      </view>
      <view class="flex-1">
        <view class="game-mode-title">{{t.hardModeTitle}}</view>
        <view class="game-mode-desc">{{t.hardModeDesc}}</view>
      </view>
      <view class="coming-soon-tag">{{t.hardModeComingSoon}}</view>
    </view>
  </view>
  
  <!-- 排行榜 -->
  <view class="flex-between mb-medium">
    <view class="section-title">{{t.rankings}}</view>
    <view class="view-all" bindtap="viewAllRankings">{{t.viewAll}}</view>
  </view>
  
  <view class="card ranking-card">
    <view class="ranking-item" wx:for="{{rankings}}" wx:key="index">
      <view class="flex-start">
        <block wx:if="{{item.rank <= 3}}">
          <image class="ranking-medal mr-small" src="/assets/icons/{{item.rank === 1 ? 'first' : (item.rank === 2 ? 'second' : 'third')}}.png" mode="aspectFit" />
        </block>
        <block wx:else>
          <view class="ranking-number {{item.rank === 'you' ? 'you' : ''}}">{{item.rank}}</view>
        </block>
        <image wx:if="{{item.avatarUrl}}" class="ranking-avatar mr-small" src="{{item.avatarUrl}}" mode="aspectFill"></image>
        <view wx:else class="ranking-avatar-fallback mr-small">
          <text class="iconfont icon-a-MATE_huaban1fuben118" style="color:#ffffff;font-size:28rpx;"></text>
        </view>
        <text class="{{item.rank === 'you' ? 'text-primary font-bold' : ''}}">{{item.name}}</text>
      </view>
      <text class="{{item.rank === 'you' ? 'text-primary font-bold' : 'font-bold'}}">{{item.points}}{{t.points}}</text>
    </view>
  </view>
</view> 