# 邀请码功能测试文档

## 功能概述
邀请码功能包含以下四个核心字段：
1. `inviteCode` - 用户自己的邀请码（唯一）
2. `invitedUsers` - 被邀请用户的openid数组
3. `inviterID` - 邀请者的openid
4. `claimCount` - 领奖次数

## 测试场景

### 场景1：新用户注册
1. 新用户A进入小程序
2. 填写用户信息（不填写邀请码）
3. 注册成功后，A的邀请码字段应该被正确初始化：
   - `inviteCode`: 6位随机字母数字组合
   - `invitedUsers`: []
   - `inviterID`: ""
   - `claimCount`: 0

### 场景2：用户填写邀请码注册
1. 新用户B进入小程序
2. 填写用户信息，并填写用户A的邀请码
3. 注册成功后：
   - B的`inviterID`应该设置为A的openid
   - A的`invitedUsers`数组中应该添加B的openid

### 场景3：邀请好友功能
1. 用户A进入campus页面
2. 点击邀请好友按钮
3. 应该显示邀请码弹窗
4. 复制邀请码并分享

### 场景4：领奖功能
1. 用户A邀请了用户B（A的`invitedUsers`长度为1，`claimCount`为0）
2. A进入campus页面，应该看到绿色"领取奖励"按钮
3. 点击按钮，应该获得30金币
4. 按钮变回黄色，显示"已邀请1/5人"
5. A的`claimCount`更新为1

### 场景5：连续邀请和领奖
1. 用户A又邀请了用户C（A的`invitedUsers`长度为2，`claimCount`为1）
2. A进入campus页面，应该看到绿色"领取奖励"按钮
3. 点击按钮，应该获得40金币（C的奖励）
4. 按钮变回黄色，显示"已邀请2/5人"
5. A的`claimCount`更新为2

### 场景6：完成邀请任务
1. 用户A邀请了5个用户（D、E、F、G、H）
2. A的`invitedUsers`长度为5，`claimCount`为2
3. A进入campus页面，应该看到绿色"领取奖励"按钮
4. 点击按钮，应该获得180金币（50+60+70）
5. 邀请好友卡片不再显示（因为已完成）

## 验证要点

### 数据一致性
- 邀请码字段在用户注册时正确初始化
- 邀请关系在用户填写邀请码时正确建立
- 领奖次数在领取奖励时正确更新

### 界面状态
- 按钮颜色根据邀请人数和领奖次数正确变化
- 邀请人数显示正确
- 卡片显示/隐藏逻辑正确

### 奖励计算
- 奖励金额按照[30, 40, 50, 60, 70]递增
- 只计算未领取的奖励
- 金币正确增加到用户账户

## 错误处理
- 网络错误时的处理
- 邀请码验证失败的处理
- 用户未登录时的处理 